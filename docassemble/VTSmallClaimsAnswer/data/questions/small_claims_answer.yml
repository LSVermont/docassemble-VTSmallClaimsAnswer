---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALToolbox:phone-number-validation.yml
  - docassemble.VTSharedYMLFile:VTSharedYMLFile.yml
---
metadata:
  title: >-
    Small claims answer
  short title: >-
    Small claims answer
  description: |-
    This interview helps someone in Vermont respond to a small claims case.
  can_I_use_this_form: |
    If you are have been sued in small claims court, you can use this tool to respond.
  before_you_start: |
    This tool will help you respond to a small claims case.
    
    Before you get started, please gather:
    
    
    When you are finished, you will need to:
    

  maturity: production
  estimated_completion_minutes: 30
  estimated_completion_delta: 10
  LIST_topics: 
    - "MO-10-00-00-00"
  tags:
    - "MO-10-00-00-00"
  authors:
    - Kris Surette, VTCourtForms / Legal Services Vermont
  original_form:
    - https://vtlawhelp.org/cfp/respond-small-claims-complaint
  original_form_published_on: 2015-07-01
  help_page_url: >-
    https://vtlawhelp.org/cfp/respond-small-claims-complaint
  help_page_title: >-
    Respond to a Small Claims Complaint
  allowed_courts: []
  typical_role: "defendant"
  al_weaver_version: "1.11.0"
  generated_on: "2024-11-14"
  languages:
    - en
  jurisdiction: NAM-US-US+VT
  review_date: 2024-11-14
  form_titles:
    - Small claims answer
  form_numbers:
    - 100-00126
  update_notes: |
---
code: |
  # This controls the default country and list of states in address field questions
  AL_DEFAULT_COUNTRY = "US"
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = "VT"
---
code: |
  github_repo_name =  'docassemble-SmallClaimsAnswer'
---
code: |
  interview_short_title = "Respond to a small claims case"
---
code: |
  al_form_type = "existing_case" 
---
objects:
  - users: ALPeopleList.using(ask_number=True,target_number=1)
---
objects:
  - all_courts: ALCourtLoader.using(file_name='docassemble.VTSharedYMLFile:data/sources/courts_list_full.xlsx')
---
code: |
  trial_court_index = all_courts.matching_courts_in_county(county_name=user_selected_county,search_columns=['division_abbr'],search_string=trial_court_division)[0][0]
---
sections:
  - intro: Is this interview right for you
  - about_you: About you
  - other_party: The other party
  - case_info: Your court case
  - defenses: Any defenses?
  - payments: Agree to payments?
  - exempt_income: Any exempt income?
  - counterclaims: Any counterclaims?
  - review_small_claims_answer: Edit your answers
  - sign: Sign your document
  - get_docs: Download your document
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_small_claims_answer
code: |
  # Set the allowed courts for this interview
  allowed_courts = []
  user_role = "defendant"
  user_ask_role = "defendant"
  nav.set_section('intro')
  if was_sued == False:
    wrong_interview_kickout
  else:
    if sued_for >= 10001:
      wrong_interview_kickout
    else:
      sued_when_served
      if sued_when_served <= today().minus(months=1):
        late_answer_warning
  lets_get_started
  nav.set_section('about_you')
  users.gather()
  set_progress(14)
  users[0].address.address
  users[0].daytime_phone_number
  users[0].email
  set_progress(28)
  nav.set_section('other_party')
  other_parties.there_are_any = True
  other_parties.gather()
  nav.set_section('case_info')
  trial_court_division = "Civil"
  docket_number
  user_selected_county
  trial_court.address.county
  nav.set_section('defenses')
  if len(defenses.true_values()) > 0:
    disagrees_additional_explanation
    get_merged_defenses
  if not len(defenses.true_values()) > 0:
    nav.set_section('payments')
    agreeing_with_complaint_and_payments
  set_progress(42)
  nav.set_section("exempt_income")
  has_exempt_income_state
  nav.set_section("counterclaims")
  if len(counterclaims.true_values()) > 0:
    get_merged_counterclaims
  else:
    no_counterclaims

  set_progress(56)
  interview_order_small_claims_answer = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  interview_order_small_claims_answer
  nav.set_section("review_small_claims_answer")
  trial_court.address.county
  if len(defenses.true_values()) > 0:
    get_merged_defenses
  if len(counterclaims.true_values()) > 0:
    get_merged_counterclaims
  small_claims_answer_preview_question
  nav.set_section("sign")
  signature_date
  set_progress(95)
  al_form_requires_digital_signature = False
  basic_questions_signature_flow
  
  # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "reached_interview_end": True,
      },
  )
  nav.set_section("get_docs")
  small_claims_answer_download
---
id: basic questions intro screen
question: |
  **${interview_short_title} in Vermont**
subquestion: |  
  
  ${ intro_vtcourtforms_3_steps }
  
  <i class="fas fa-file-text fa-2x"></i> This tool will produce forms to respond to a small claims lawsuit. Depending on your answers to the questions, this tool will complete these forms:
  
  - Small Claims Answer
  - Certificate of Service
  - Disclosure of Exempt Income (VTCourtForms will tell you if you need this)
  - Financial Disclosure Affidavit (VTCourtForms will tell you if you need this)
  - Court fee waiver form (if you want to make "counterclaims")
  
  <i class="fas fa-clock fa-2x"></i> It may take you 45 minutes to complete this. 
  
  <i class="fas fa-circle-info fa-2x"></i> It is free to use this program. This site is not a lawyer. Visit our [VTLawHelp.org website](https://vtlawhelp.org) for legal information.
  
  ${ intro_vtcourtforms_created_by }

  Tap Next to continue.
  
continue button field: al_intro_screen
---
id: screening have you been sued
question: |
  Is this tool right for you?
subquestion: | 
  Have you been sued in small claims court?
fields:
  - "Did you get a complaint that says this near the top: SMALL CLAIMS COMPLAINT?": was_sued    
    datatype: yesnoradio
---
id: screening sued for under 10k
question: |
  Is this tool right for you?
subquestion: | 
  How much do they say you owe?
fields:
  - Amount on the complaint: sued_for    
    datatype: currency
---
id: screening when served
question: |
  Is this tool right for you?
subquestion: | 
  When did you receive the complaint?
fields:
  - Date: sued_when_served    
    datatype: date
---
id: screening late answer warning
question: |
  Warning
subquestion: | 
  The court sets a deadline to send your answer in within 30 days of receiving the complaint. If it has been longer than 30 days, fill out this form and file it with the court **as soon as possible.** Do this before the plaintiff asks for a default judgment against you, which can happen any time after the 30-day deadline.

  You can still use this tool, but because you are late, be warned that the plaintiff may be asking the court for a default judgment against you now or very soon.

fields:
  - To continue, please accept our [terms of use](https://vtlawhelp.org/vtcourtforms/terms-of-use).: acknowledged_information_use
    datatype: checkboxes
    none of the above: False    
    minlength: 1
    choices:
      - I accept the terms of use.
    validation messages:
      minlength: |
        You cannot continue unless you agree to the terms of use.
continue button field: late_answer_warning
---
id: screening wrong interview kickout
question: |
  Stop
subquestion: | 
  This is not the right tool for you to use.

  Ask for general help with court forms or the court process by contacting the [Vermont Judiciary Access and Resource Center.](https://www.vermontjudiciary.org/self-help/ARC) Their services are free and they serve the whole state. They do NOT give legal advice.

  Email: [selfhelp@vtcourts.gov](mailto:selfhelp@vtcourts.gov)
  
  Call: 802-879-1185
buttons:
  - DELETE your answers: restart
continue button field: wrong_interview_kickout
---
id: lets get started
question: |
  Getting started
subquestion: |

  Before you get started, have these things on hand:
  
  1. 
  1. 
  1. 
  
  When you are finished, you will need to:
  
  1. 
  1.
  
  Keep in mind, you can edit your answers after you preview the finished forms. You can also do that anytime by choosing Edit My Answers on the side of the screen or in the Menu at the top-right of the screen.
  
  You can also go to the Menu and quickly Exit and Delete Your Answers if you need to. And, you may choose to make a free account so you can store your answers online and come back to them later.

  **Important 30-day deadline**: The court sets a deadline to send your answer in within 30 days of receiving the complaint. It's important to meet this deadline. If you are late, the plaintiff can ask for a default judgment against you any time after the 30-day deadline. Then you may lose your case.

fields:
  - To continue, please accept our [terms of use](https://vtlawhelp.org/vtcourtforms/terms-of-use).: acknowledged_information_use
    datatype: checkboxes
    none of the above: False    
    minlength: 1
    choices:
      - I accept the terms of use.
    validation messages:
      minlength: |
        You cannot continue unless you agree to the terms of use.        

continue button field: lets_get_started
---
id: Phone and email
question: |
  Phone and email
fields:
  - "Your daytime phone number": users[0].daytime_phone_number
    maxlength: 27
  - "Your email address": users[0].email
    maxlength: 38  
---
id: names of opposing parties
sets:
  - other_parties[i].name.first
  - other_parties[i].name.last
  - other_parties[i].name.middle
  - other_parties[i].name.suffix
question: |
  % if user_started_case:
  Name of ${ ordinal(i) } defendant
  % else:
  Name of ${ ordinal(i) } plaintiff in this matter
  % endif
subquestion: |
  % if user_started_case:
  A defendant is the person who was sued and is responding to a court action.
  % else:
  A plaintiff is a person, company or organization who started this case.
  % endif
fields:
  - code: |
      other_parties[i].name_fields(person_or_business='unsure')
---
id: any other opposing parties
question: |
  % if user_started_case:
  Is there any other defendant in this matter?
  % else:
  Is there any other plaintiff in this matter?
  % endif
fields:
  - no label: other_parties.there_is_another
    datatype: yesnoradio
---
id: docket number
question: |
  What is the case number used to track this case in court?
subquestion: |
  Look at the forms you got from the court. They probably have a docket number / case number.
fields:
  - I don't know the case number: dont_know_docket_number
    datatype: yesno    
  - Case number: docket_number
    hide if: dont_know_docket_number
validation code: |
  # This should be safe too
  if dont_know_docket_number:
    docket_number = ''   
---
id: choose a court county
question: |
  What county is your case in?
fields:
  - note: |
      Choose the county where you will file this form.

  - County: user_selected_county
    code: sorted(all_courts.unique_column_values('branch') - {"Environmental", "Judicial Bureau"} )
  
  - note: |
      ${ collapse_template(which_county_to_choose) }
      ${ collapse_template(in_which_county) }
---
id: defenses
question: |
  Any reasons why you believe you do **not** owe this money?
subquestion: |
  In this small claims case, a plaintiff has started the case by filing a "complaint" against you.
  
  “Defenses” to debt collection are reasons why the plaintiff may not have a legal right to the money. This screen will help you report any possible defenses in your answer.

  NOTE: If you choose any of these defenses, you are choosing to disagree with what the plaintiff has claimed.

fields:
- "Check any boxes that describe your situation.": defenses
  datatype: checkboxes
  choices:
    - "I don't recognize this debt. (Tip: If you cannot recall everything that the plaintiff is saying in their complaint, or if you are not sure, check this box.)": do_not_recognize
    - "The dollar amount the debt collectors are asking of me does not match the dollar amount I actually owe. (Tip: If you cannot recall all the amounts, or if you are not sure, check this box.)": amount_doesnt_match
    - "I have already paid the debt.": already_paid
    - "This debt is discharged due to my personal bankruptcy.": bankruptcy
    - "This debt is of a Limited Liability Corporation (LLC) registered in my name.": llc_debt
    - "The plaintiff is not the original lender of the debt, and I don't believe the plaintiff has the right to collect the debt.": not_orginal_creditor
    - "It has been six years since I incurred this debt.": long_time_since_debt
    - "It has been six years since my last payment of this debt.": long_time_since_payment
---
# "!!omap" makes these terms ordered: 
# their order here will be their same order when shown to users.
variable name: defenses_terms
data: !!omap
  - do_not_recognize: "I don't recognize this debt."
  - amount_doesnt_match: "The dollar amount the debt collectors are asking of me does not correspond to the dollar amount I actually owe."
  - already_paid: "I have already paid the debt."
  - bankruptcy: "This debt is discharged due to personal bankruptcy."
  - llc_debt: "This debt is of a Limited Liability Corporation registered in my name."
  - not_orginal_creditor: "The Plaintiff is not the original lender of the debt, and I don't believe the plaintiff has the right to collect the debt."
  - long_time_since_debt: "It has been six years since I incurred this debt."
  - long_time_since_payment: "It has been six years since my last payment of this debt."
---
id: combining individual defenses and the explanation
code: |
  merged_defenses_text = ""
  for item in defenses.true_values():
    merged_defenses_text += defenses_terms[item] + "\n"
  merged_defenses_text += disagrees_additional_explanation
  get_merged_defenses = True
---
id: disagrees with the complaint
question: |
  Do you want to add any more details?
subquestion: |
  So far, this is the text we have to explain your defense(s). You can explain a little more if you want.
  
  **I disagree that I owe the plaintiff the full amount claimed in the complaint and I request a court hearing.**

  % if defenses["do_not_recognize"]:
    - **I don't recognize this debt.**
  % endif
  % if defenses["amount_doesnt_match"]:
    - **The dollar amount the debt collectors are asking of me does not correspond to the dollar amount I actually owe.**
  % endif  
  % if defenses["already_paid"]:
    - **I have already paid the debt.**
  % endif
  % if defenses["bankruptcy"]:
    - **This debt is discharged due to personal bankruptcy.**
  % endif
  % if defenses["llc_debt"]:
    - **This debt is of a Limited Liability Corporation registered in my name.**
  % endif
  % if defenses["not_orginal_creditor"]:
    - **The Plaintiff is not the original lender of the debt, and I don't believe the plaintiff has the right to collect the debt.**
  % endif
  % if defenses["long_time_since_debt"]:
    - **It has been six years since I incurred this debt.**
  % endif
  % if defenses["long_time_since_payment"]:
    - **It has been six years since my last payment of this debt.**
  % endif
  
fields:
  - "More explanation (optional)": disagrees_additional_explanation
    input type: area
    required: false
---
id: agrees with the complaint
question: |
  You agree with the complaint?
subquestion: |
  On the last screen, you did not choose any "defenses" to the small claims complaint against you. That means you agree with the amount you owe and who you owe. If that is true, check the box below.

  You should only check the box below if your recall everything that the plaintiff is saying in their complaint as true. If you are not sure, do not check this box. Go back one screen and choose a defense instead.

  **When you agree with the complaint**: Depending on your financial situation, the court may make a judgement to say you need to pay the debt. You will have to pay the money back within 30 days after the judgment is made. If you don't pay within 30 days, you will also have to pay interest on the unpaid money at the rate of 12% per year. 
  
  **I agree that I owe the plaintiff the full amount claimed in the complaint and the court may enter a judgment against me.**
fields:
  - "I agree": agrees_with_complaint
    datatype: yesno
  - note: |
      Check the box if you agree. If you do **not** agree and want to revisit the list of defenses, tap the Undo button.
  - note: |
      If the court finds you need to pay the debt and enters a judgment against you, what do you plan to do?
      
    show if: agrees_with_complaint  
  - "Check one of the following.": payment
    datatype: checkboxes
    choices:    
      - "I agree to pay the amount in full within 30 days. (If unpaid after 30 days, interest on the unpaid amount will accrue at 12% per year).": agrees_to_pay_in_full
      - "I cannot pay the full amount at one time. I'd like to ask the court for installment payments.": agrees_to_pay_installments
    show if: agrees_with_complaint
    none of the above: false
    maxlength: 1
    minlength: 1
  - "I can pay this amount": agrees_to_pay_installments_amount
    datatype: currency
    min: 0
    js show if: |
      val("payment") == "agrees_to_pay_installments"
  - Every: agrees_to_pay_installments_period
    datatype: radio
    choices:
      - Week
      - Two weeks
      - Month
      - Two months
    js show if: |
      val("payment") == "agrees_to_pay_installments"
  - Starting on this date: agrees_to_pay_installments_start_date
    datatype: date
    js show if: |
      val("payment") == "agrees_to_pay_installments"

  - note: |
      Should we ask this agreeable user if they want to do a counterclaim???
continue button field: agreeing_with_complaint_and_payments
---
id: exempt income
question: |
  Do you have "exempt" income?
subquestion: |
  Certain types of income and assets (things you own) are called "exempt" and cannot be taken to pay a debt.
  
  As part of your answer, you can let the plaintiff and the court know if all or some of your income may be exempt from collection. Below are examples of exempt income.
  
  **Check any boxes that apply to you.**

  I am currently eligible, or was eligible within the last two months, for benefits from these exempt sources:

fields:
  - no label: has_exempt_income_state
    datatype: checkboxes
    choices:
      - the Vermont Department for Children and Families (DCF) (examples…)
      - the Department of Vermont Health Access (DVHA).(examples…)
  - note: |
      I have income from these exempt sources:
  - no label: has_exempt_income_other
    datatype: checkboxes
    choices:      
      - Social Security Income (examples…)
      - Social Security or Social Security Disability (SSDI?)
      - Veteran’s Benefits
      - Unemployment Compensation
      - Workers’ Compensation
---
id: counterclaims options
question: |
  Do you want to make counterclaims?
subquestion: |
  This screen can help figure out if you have “counterclaims” against the plaintiff (the person or company that sued you).

  If you decide to file counterclaims, you are asking the court to give YOU money.
  
  There is a court filing fee for counterclaims:
  
  - You would pay $25 if your counterclaims are for $500 or less.
  - You would pay $35 if your counterclaims are between $501 and $10,000.
  - If you have a low income, you can ask the court to waive the fee. You can use our VTCourtForms tool for the fee waiver form.

  **Check any box that describes your situation.**

fields:
  - no label: counterclaims
    datatype: checkboxes
    choices:
      - "I believe the plaintiff owes me money.": plaintiff_owes_money
      - "The plaintiff is not the original creditor or lender of the money.": plaintiff_not_original_creditor
      - "I didn't get a letter from the plaintiff alerting me to my debt before I was sued.": no_notice
      - "The plaintiff made statements that were not true or were misleading about the debt.": false_statements
      - "The plaintiff harassed me.": harassment

  - note: |
      Notes about harassment: 
      
      - You can successfully claim harassment in a case like this if the plaintiff's behavior was **beyond** annoying. For example, they called you at late hours of the night or early morning, they used swear words or they called you multiple times a day. Those are harassing behaviors.
      
      - You can bring a counterclaim for a violation of the Fair Debt Collection Practices Act (FDCPA) for misleading claims, threats, major harassment, etc. The FDCPA applies to third party debt collectors, so one element of an FDCPA violation claim is acknowledging that the debt collector is not the original creditor. However, this alone does not provide grounds for an FDCPA counterclaim.
---
id: counterclaims amount
question: |
  Counterclaim details
subquestion: |
  You've selected a reason(s) for filing counterclaims:
  
  % for item in counterclaims.true_values():
  - **${ counterclaims_terms[item] }**
  
  % endfor
  
  Now, please confirm that you want to pursue the counterclaims. You can further explain the reason(s). And you can say how much you want to ask the court for in your counterclaims.
  
fields:
  - "I want to file counterclaims. I know I will pay a filing fee or ask for a fee waiver.": has_counterclaims
    datatype: yesnoradio
  - "I want to ask the court for this amount of money": counterclaims_amount
    datatype: currency
    js show if: |
      val("has_counterclaims") == true
  - note: |
        When you ask for money in a counterclaim, you are asking for "damages." In small claims court, the amount must be less than $10,001.
    js show if: |
      val("has_counterclaims") == true
  - "Further describe the reason(s) for your counterclaims": counterclaims_description
    input type: area
    js show if: |
      val("has_counterclaims") == true
---
id: if no counterclaims
question: |
  No counterclaims
subquestion: |
  You have not selected a reason for a counterclaim. We will not include a counterclaim form in this package.

  Tap Next to continue.
continue button field: no_counterclaims
---
# "!!omap" makes these terms ordered: 
# their order here will be their same order when shown to users.
variable name: counterclaims_terms
data: !!omap
  - plaintiff_owes_money: "I believe the plaintiff owes me money."
  - plaintiff_not_original_creditor: "The plaintiff is not the original creditor or lender of the money."
  - no_notice: "I didn't get a letter from the plaintiff alerting me to my debt before I was sued."
  - false_statements: "The plaintiff made statements that were not true or were misleading about the debt."
  - harassment: "The plaintiff harassed me."
---
id: combining individual counterclaims and the explanation
code: |
  merged_counterclaims_text = ""
  for item in counterclaims.true_values():
    merged_counterclaims_text += counterclaims_terms[item] + "\n"
  merged_counterclaims_text += counterclaims_description
  get_merged_counterclaims = True
---
id: preview small_claims_answer
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_small_claims_answer'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: small_claims_answer_preview_question   
---
code: |
  signature_fields = ['users[0].signature']
---
id: Signing your forms
question: |
  Signature date
fields:
  - "This is how your name will appear under your signature.": printed_signature
    default: |
      ${ users[0].name }
    maxlength: 34

  - "Date of your signature for these forms": signature_date
    datatype: date
    required: False
    default: |
      ${ today() }
  -  note: |
       You can change this date later if you want.
       
       **Tap Next to choose how to sign your documents.**
---
id: signature choice
decoration: file-signature
question: |
  Your documents are almost ready
subquestion: |
  How do you want to sign them?
fields: 
  - I will sign: signature_choice
    input type: radio
    choices:
      - On my computer or phone: this_device
    show if:
      code: |
        al_form_requires_digital_signature
  - I will sign: signature_choice
    input type: radio
    choices:
      - On my computer or phone: this_device
      - On the paper with a pen after I print the documents: sign_after_printing
    show if:
      code: |
        not al_form_requires_digital_signature
continue button field: saw_signature_choice    
---
code: |
  # This is a placeholder for the addresses that will be searched
  # for matching address to court. Edit if court venue is based on 
  # a different address than the user's
  [user.address.address for user in users.complete_elements()]
  addresses_to_search = [user.address for user in users.complete_elements()]
---
id: small claims answer review screen
event: review_small_claims_answer
question: |
  Review your answers
review:
  - Edit: trial_court
    button: |
      **Trial court**
  
      % if defined("trial_court.address.county"):
      * address: ${ trial_court.address.block() }
      % endif
  - Edit: docket_number
    button: |
      **Docket number**:
      ${ docket_number }
  - Edit: other_parties.revisit
    button: |
      **Other parties**

      % for item in other_parties:
        * ${ item }
      % endfor
  - Edit: users.revisit
    button: |
      **Users**

      % for item in users:
        * ${ item }
      % endfor
  - Edit: agrees_with_complaint
    button: |
      **Agree with complaint**:
      ${ word(yesno(agrees_with_complaint)) }
  - Edit: agrees_to_pay_in_full
    button: |
      **Agree to pay in full**:
      ${ word(yesno(agrees_to_pay_in_full)) }
  - Edit: agrees_to_pay_installments
    button: |
      **Agree to pay installments**:
      ${ word(yesno(agrees_to_pay_installments)) }
  - Edit: agrees_to_pay_installments_amount
    button: |
      **In this amount**:
      ${ currency(agrees_to_pay_installments_amount) }
  - Edit: agrees_to_pay_installments_period
    button: |
      **Every**:
      ${ agrees_to_pay_installments_period }
  - Edit: agrees_to_pay_installments_start_date
    button: |
      **Starting**:
      ${ agrees_to_pay_installments_start_date }
  - Edit: disagrees_with_complaint
    button: |
      **Disagree with complaint**:
      ${ word(yesno(disagrees_with_complaint)) }
  - Edit: disagrees_additional_explanation
    button: |
      **Please explain**:
      > ${ single_paragraph(disagrees_additional_explanation) }
  - Edit: has_exempt_income
    button: |
      **Have exempt income**:
      ${ word(yesno(has_exempt_income)) }

  - Edit: has_counterclaims
    button: |
      **Have a counterclaim**:
      ${ word(yesno(has_counterclaims)) }
  - Edit: counterclaims_description
    button: |
      **Please describe**:
      > ${ single_paragraph(counterclaims_description) }
  - Edit: signature_date
    button: |
      **Date of signature**:
      ${ signature_date }
  - Edit: users[0].daytime_phone_number
    button: |
      **Your daytime phone number**:
      ${ users[0].daytime_phone_number }
---
continue button field: other_parties.revisit
question: |
  Edit other_parties
subquestion: |
  ${ other_parties.table }

  ${ other_parties.add_action() }
---
table: other_parties.table
rows: other_parties
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True

---
continue button field: users.revisit
question: |
  Edit users
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Signature: |
      row_item.signature if defined("row_item.signature") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Email: |
      row_item.email if defined("row_item.email") else ""
edit:
  - name.first
  - signature
  - address.address
  - daytime_phone_number
  - email
confirm: True
---
############################# SIGNATURE #############################
---
id: User signature
question: |
  User signature
continue button field: User_signature
---
id: signature choice
decoration: file-signature
question: |
  Your documents are almost ready
subquestion: |
  How do you want to sign them?
fields: 
  - I will sign: signature_choice
    input type: radio
    choices:
      - On my computer or phone: this_device
    show if:
      code: |
        al_form_requires_digital_signature
  - I will sign: signature_choice
    input type: radio
    choices:
      - On my computer or phone: this_device
      - On the paper with a pen after I print the documents: sign_after_printing
    show if:
      code: |
        not al_form_requires_digital_signature
continue button field: saw_signature_choice    
---
---
id: download small_claims_answer
event: small_claims_answer_download
question: |
  All done
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_small_claims_answer'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

progress: 100
---
code: |
  small_claims_answer_attachment.overflow_fields["merged_defenses_text"].overflow_trigger = 348
  small_claims_answer_attachment.overflow_fields["merged_defenses_text"].label = "Please explain"
  small_claims_answer_attachment.overflow_fields["merged_counterclaims_text"].overflow_trigger = 344
  small_claims_answer_attachment.overflow_fields["merged_counterclaims_text"].label = "Please describe"
  small_claims_answer_attachment.overflow_fields.gathered = True
---
---
# ALDocument objects specify the metadata for each template
objects:
  - small_claims_answer_Post_interview_instructions: ALDocument.using(title="Instructions", filename="small_claims_answer_next_steps.docx", enabled=True, has_addendum=False)
  - small_claims_answer_attachment: ALDocument.using(title="Small claims answer", filename="small_claims_answer", enabled=True, has_addendum=True, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
---
# Bundles group the ALDocuments into separate downloads, such as for court and for the user
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[small_claims_answer_Post_interview_instructions, small_claims_answer_attachment], filename="small_claims_answer", title="All forms to download for your records", enabled=True)
  - al_court_bundle: ALDocumentBundle.using(elements=[small_claims_answer_attachment],  filename="small_claims_answer", title="All forms to deliver to court", enabled=True)
---
# Each attachment defines a key in an ALDocument. We use `i` as the placeholder here so the same template is 
# used for "preview" and "final" keys, and logic in the template checks the value of 
# `i` to show or hide the user's signature
attachment:
  name: Post-interview-Instructions
  filename: small_claims_answer_next_steps
  docx template file: small_claims_answer_next_steps.docx
  variable name: small_claims_answer_Post_interview_instructions[i]
  skip undefined: True
  tagged pdf: True
---
attachment:
  name: small claims answer
  filename: small_claims_answer
  variable name: small_claims_answer_attachment[i]
  skip undefined: True
  pdf template file: small_claims_answer.pdf
  fields:
      - "trial_court_county": ${ trial_court.address.county }
      - "docket_number": ${ docket_number }
      - "other_parties1_name": ${ other_parties.short_list(2) }
      - "users1_name": ${ users[0] }
      - "agrees_with_complaint": ${ agrees_with_complaint }
      - "agrees_to_pay_in_full": ${ payment["agrees_to_pay_in_full"] }
      - "agrees_to_pay_installments": ${ payment["agrees_to_pay_installments"] }
      - "agrees_to_pay_installments_amount": ${ currency(agrees_to_pay_installments_amount) }
      - "agrees_to_pay_installments_period": ${ agrees_to_pay_installments_period.lower() }
      - "agrees_to_pay_installments_start_date": ${ agrees_to_pay_installments_start_date.format() }
      - "disagrees_with_complaint": |
          % if len(defenses.true_values()) > 0:
          ${ True }
          % endif
      - "disagrees_with_complaint_description": |
          ${ small_claims_answer_attachment.safe_value("merged_defenses_text") }
      - "has_exempt_income": |
          % if len(has_exempt_income_state.true_values()) > 0:
          ${ True }
          % elif len(has_exempt_income_other.true_values()) > 0:
          ${ True }
          % else:
          ${ False }
          % endif
      - "has_counterclaim": |
          % if len(counterclaims.true_values()) > 0:
          ${ True }
          % endif
      - "counterclaim_description": |
          ${ small_claims_answer_attachment.safe_value("merged_counterclaims_text") }
      - "users1_signature": ${ users[0].signature_if_final(i) }
      - "users1_name_1": ${ users[0] }
      - "users1_address_on_one_line": ${ users[0].address.on_one_line() }
      - "signature_date": ${ signature_date }
      - "users1_daytime_phone_number": ${ users[0].daytime_phone_number }
      - "users1_email": ${ users[0].email }
---




